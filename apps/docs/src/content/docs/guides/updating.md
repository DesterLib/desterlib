---
title: Updating DesterLib
description: How to update DesterLib to the latest version
---

Keep your DesterLib installation up-to-date with the latest features and bug fixes.

## Updating the Server

### CLI Installation (Recommended Method)

If you installed via `npx @desterlib/cli`:

```bash
cd ~/.desterlib

# Pull latest Docker images
docker-compose pull

# Restart with new version
docker-compose up -d
```

**That's it!** The update is complete.

### Git Installation (Manual Method)

If you cloned the repository:

```bash
cd desterlib

# Pull latest code
git pull origin main

# Rebuild and restart
docker-compose down
docker-compose up -d --build
```

## Updating Client Apps

### Mobile & Desktop Apps

**Download new version:**

1. Go to [Releases](https://github.com/DesterLib/Dester-Flutter/releases/latest)
2. Download for your platform
3. Install (overwrites old version)

**On mobile:**

- Android: Install new APK (overwrites automatically)
- iOS: Reinstall from source or TestFlight (when available)

**On desktop:**

- Replace the old app with the new one
- Your settings and server connection persist

## Checking Versions

### Server Version

```bash
# Check Docker image version
docker images | grep desterlib

# Check running container image
docker inspect desterlib-api | grep Image
```

### Client Version

In the app:

- Go to **Settings ‚Üí About**
- Check version number

:::note[Version Mismatch]
The app version display may not match release tags during alpha. This will be fixed in stable releases.
:::

## Update Frequency

### Recommended Schedule

- **Server**: Check weekly during alpha
- **Client**: Check weekly during alpha
- **Stable releases**: Monthly or when needed

### How to Stay Updated

Follow updates:

- ‚≠ê Star the [GitHub repo](https://github.com/DesterLib/desterlib)
- üëÄ Watch releases on GitHub
- üì¢ Join [GitHub Discussions](https://github.com/DesterLib/desterlib/discussions)

## Database Migrations

DesterLib handles database migrations automatically:

- Schema changes apply on container start
- Uses Prisma's `db push` during startup
- No manual migration needed

:::tip
Database migrations happen automatically when you update. Your data is preserved!
:::

## Rollback

If an update causes issues:

### Server Rollback

**CLI installation:**

```bash
cd ~/.desterlib

# Pull specific version (if tagged)
docker pull desterlib/api:v1.0.0

# Edit docker-compose.yml to use that tag
# Then restart
docker-compose up -d
```

**Git installation:**

```bash
cd desterlib

# Go back to previous commit/tag
git checkout v1.0.0  # or specific commit

# Rebuild
docker-compose up -d --build
```

### Client Rollback

Download and install a previous release from the [Releases page](https://github.com/DesterLib/Dester-Flutter/releases).

## Breaking Changes

During alpha development, breaking changes may occur. We'll document them in:

- Release notes on GitHub
- Package-specific changelogs (auto-generated by Changesets):
  - [API Changelog](https://github.com/DesterLib/desterlib/blob/main/apps/api/CHANGELOG.md)
  - [CLI Changelog](https://github.com/DesterLib/desterlib/blob/main/packages/cli/CHANGELOG.md)
  - [Docs Changelog](https://github.com/DesterLib/desterlib/blob/main/apps/docs/CHANGELOG.md)
- [Aggregated Changelog](https://desterlib.github.io/desterlib/changelog) on docs site
- Migration guides when needed

## Troubleshooting Updates

### Update Failed

**Error pulling images:**

```bash
# Check Docker is running
docker ps

# Try pulling manually
docker pull desterlib/api:latest
docker pull postgres:15-alpine
```

**Database migration failed:**

```bash
# Check logs
docker-compose logs api

# If corrupted, restore from backup
cat backup.sql | docker exec -i desterlib-postgres psql -U desterlib desterlib
```

### Version Not Changing

**Verify update:**

```bash
docker images desterlib/api
# Check if "latest" tag is recent
```

**Force update:**

```bash
docker-compose down
docker-compose pull
docker-compose up -d --force-recreate
```

## Best Practices

### Before Updating

1. ‚úÖ **Backup your database** - See [Backup Guide](/guides/backup-restore/)
2. ‚úÖ **Read release notes** - Check for breaking changes
3. ‚úÖ **Stop running scans** - Avoid interrupting operations
4. ‚úÖ **Test on non-production first** - If possible

### After Updating

1. ‚úÖ **Check logs** - `docker-compose logs -f`
2. ‚úÖ **Test health** - `curl http://localhost:3001/health`
3. ‚úÖ **Verify API docs** - Visit `http://localhost:3001/api/docs`
4. ‚úÖ **Test streaming** - Play a video

## Related Documentation

- [Managing Server](/guides/managing-server/) - Server management commands
- [Backup & Restore](/guides/backup-restore/) - Data backup strategies
- [Installation Guide](/getting-started/installation/) - Initial setup
- [Troubleshooting](/getting-started/installation/#troubleshooting) - Common issues
